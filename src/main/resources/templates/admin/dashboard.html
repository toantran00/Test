<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard - Pet Shop</title>

<!-- Bootstrap CSS -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
	rel="stylesheet">
<!-- Font Awesome -->
<link rel="stylesheet"
	href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<!-- Chart.js -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
.sidebar {
	background: linear-gradient(180deg, #2c3e50 0%, #3498db 100%);
	color: white;
	height: 100vh;
	position: fixed;
	width: 250px;
	transition: all 0.3s;
}

.sidebar .nav-link {
	color: white;
	padding: 15px 20px;
	border-bottom: 1px solid rgba(255, 255, 255, 0.1);
	transition: all 0.3s;
}

.sidebar .nav-link:hover {
	background: rgba(255, 255, 255, 0.1);
	padding-left: 25px;
}

.sidebar .nav-link.active {
	background: rgba(255, 255, 255, 0.2);
	border-left: 4px solid #fff;
}

.main-content {
	margin-left: 250px;
	padding: 20px;
	transition: all 0.3s;
}

.stat-card {
	background: white;
	border-radius: 10px;
	padding: 20px;
	box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
	margin-bottom: 20px;
	transition: transform 0.3s;
}

.stat-card:hover {
	transform: translateY(-5px);
}

.stat-number {
	font-size: 2rem;
	font-weight: bold;
	color: #2c3e50;
}

.stat-icon {
	font-size: 2.5rem;
	color: #3498db;
}

.dashboard-header {
	background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
	color: white;
	padding: 30px 0;
	margin: -20px -20px 30px -20px;
}

.sidebar-user {
	background: rgba(255, 255, 255, 0.1);
	border-radius: 10px;
	margin: 10px;
}
</style>
</head>
<body>
	<div class="container-fluid">
		<div class="row">
			<!-- Sidebar -->
			<nav class="sidebar">
				<div class="p-3 text-center">
					<h4>
						<i class="fas fa-paw me-2"></i> Pet Shop Admin
					</h4>
					<small class="text-light">Quản trị hệ thống</small>
				</div>

				<!-- User Info -->
				<div class="sidebar-user">
					<img
						th:src="${user.hinhAnh != null ? '/uploads/images/' + user.hinhAnh : '/images/default-avatar.jpg'}"
						class="rounded-circle mb-2" width="60" height="60" alt="Avatar">
					<h6 class="text-white mb-1" th:text="${user.tenNguoiDung}">Admin
						User</h6>
					<small class="text-light" th:text="${user.email}">admin@email.com</small>
					<div class="mt-2">
						<span class="badge bg-success">ADMIN</span>
					</div>
				</div>

				<ul class="nav flex-column mt-3">
					<li class="nav-item"><a class="nav-link active"
						th:href="@{/admin/dashboard}"> <i
							class="fas fa-tachometer-alt me-2"></i> Dashboard
					</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/admin/users}"> <i class="fas fa-users me-2"></i>
							Quản lý Người dùng
					</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/admin/stores}"> <i class="fas fa-store me-2"></i>
							Quản lý Cửa hàng
					</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/admin/products}"> <i class="fas fa-box me-2"></i>
							Quản lý Sản phẩm
					</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/admin/categories}"> <i class="fas fa-tags me-2"></i>
							Quản lý Danh mục
					</a></li>
					<li class="nav-item"><a class="nav-link"
						th:href="@{/admin/orders}"> <i
							class="fas fa-shopping-cart me-2"></i> Quản lý Đơn hàng
					</a></li>
					<li class="nav-item"><a class="nav-link" href="/logout"> <i
							class="fas fa-sign-out-alt me-2"></i> Đăng xuất
					</a></li>
				</ul>
			</nav>

			<!-- Main Content -->
			<main class="main-content">
				<!-- Header -->
				<div class="dashboard-header">
					<div class="container-fluid">
						<div class="d-flex justify-content-between align-items-center">
							<div>
								<h2>Dashboard Quản trị</h2>
								<p class="mb-0">Tổng quan hệ thống Pet Shop</p>
							</div>
							<div class="d-flex align-items-center">
								<div class="bg-white rounded-pill px-3 py-1 me-3">
									<small class="text-muted">Vai trò: </small> <strong
										class="text-primary">ADMIN</strong>
								</div>
								<div class="dropdown">
									<button class="btn btn-light dropdown-toggle" type="button"
										data-bs-toggle="dropdown">
										<i class="fas fa-user-circle me-2"></i> <span
											th:text="${user.tenNguoiDung}">Admin</span>
									</button>
									<ul class="dropdown-menu">
										<li><a class="dropdown-item" th:href="@{/profile}"><i
												class="fas fa-user me-2"></i>Hồ sơ</a></li>
										<li><a class="dropdown-item" href="/logout"><i
												class="fas fa-sign-out-alt me-2"></i>Đăng xuất</a></li>
									</ul>
								</div>
							</div>
						</div>
					</div>
				</div>

				<!-- Statistics Cards -->
				<div class="row">
					<div class="col-xl-3 col-md-6">
						<div class="stat-card">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<div class="stat-number" th:text="${totalUsers}">0</div>
									<div class="text-muted">Tổng người dùng</div>
								</div>
								<i class="fas fa-users stat-icon"></i>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-md-6">
						<div class="stat-card">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<div class="stat-number" th:text="${totalStores}">0</div>
									<div class="text-muted">Cửa hàng</div>
								</div>
								<i class="fas fa-store stat-icon"></i>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-md-6">
						<div class="stat-card">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<div class="stat-number" th:text="${totalProducts}">0</div>
									<div class="text-muted">Sản phẩm</div>
								</div>
								<i class="fas fa-box stat-icon"></i>
							</div>
						</div>
					</div>
					<div class="col-xl-3 col-md-6">
						<div class="stat-card">
							<div class="d-flex justify-content-between align-items-center">
								<div>
									<div class="stat-number" th:text="${totalOrders}">0</div>
									<div class="text-muted">Đơn hàng</div>
								</div>
								<i class="fas fa-shopping-cart stat-icon"></i>
							</div>
						</div>
					</div>
				</div>

				<!-- Recent Data -->
				<div class="row mt-4">
					<!-- Recent Users -->
					<div class="col-md-6">
						<div class="stat-card">
							<h5 class="mb-3">
								<i class="fas fa-users me-2 text-primary"></i> Người dùng mới
								nhất
							</h5>
							<div class="list-group">
								<div th:each="user : ${recentUsers}"
									class="list-group-item border-0">
									<div
										class="d-flex w-100 justify-content-between align-items-center">
										<div>
											<h6 class="mb-1" th:text="${user.tenNguoiDung}">Tên
												người dùng</h6>
											<small class="text-muted" th:text="${user.email}">email@example.com</small>
										</div>
										<span class="badge"
											th:classappend="${user.vaiTro.maVaiTro == 'ADMIN'} ? 'bg-danger' : 'bg-secondary'"
											th:text="${user.vaiTro.tenVaiTro}">Vai trò</span>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Recent Stores -->
					<div class="col-md-6">
						<div class="stat-card">
							<h5 class="mb-3">
								<i class="fas fa-store me-2 text-success"></i> Cửa hàng mới nhất
							</h5>
							<div class="list-group">
								<div th:each="store : ${recentStores}"
									class="list-group-item border-0">
									<div class="d-flex w-100 justify-content-between">
										<div>
											<h6 class="mb-1" th:text="${store.tenCuaHang}">Tên cửa
												hàng</h6>
											<small class="text-muted" th:text="${store.diaChi}">Địa
												chỉ</small>
										</div>
										<small class="text-muted"
											th:text="${#dates.format(store.ngayTao, 'dd/MM/yyyy')}">Ngày
											tạo</small>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

				<div class="row mt-4">
					<!-- Recent Products -->
					<div class="col-md-6">
						<div class="stat-card">
							<h5 class="mb-3">
								<i class="fas fa-box me-2 text-info"></i> Sản phẩm mới nhất
							</h5>
							<div class="list-group">
								<div th:each="product : ${recentProducts}"
									class="list-group-item border-0">
									<div class="d-flex w-100 justify-content-between">
										<div>
											<h6 class="mb-1" th:text="${product.tenSanPham}">Tên sản
												phẩm</h6>
											<small class="text-muted"
												th:text="'₫' + ${#numbers.formatDecimal(product.giaBan, 0, 'COMMA', 0, 'POINT')}">Giá</small>
										</div>
										<small class="text-muted"
											th:text="${product.cuaHang.tenCuaHang}">Cửa hàng</small>
									</div>
								</div>
							</div>
						</div>
					</div>

					<!-- Recent Orders -->
					<div class="col-md-6">
						<div class="stat-card">
							<h5 class="mb-3">
								<i class="fas fa-shopping-cart me-2 text-warning"></i> Đơn hàng
								mới nhất
							</h5>
							<div class="list-group">
								<div th:each="order : ${recentOrders}"
									class="list-group-item border-0">
									<div class="d-flex w-100 justify-content-between">
										<div>
											<h6 class="mb-1" th:text="'Đơn #' + ${order.maDatHang}">Mã
												đơn</h6>
											<small class="text-muted"
												th:text="${order.nguoiDung.tenNguoiDung}">Khách hàng</small>
										</div>
										<span class="badge"
											th:classappend="${order.trangThai == 'New'} ? 'bg-primary' : 
                                                                           ${order.trangThai == 'Processing'} ? 'bg-warning' : 'bg-success'}"
											th:text="${order.trangThai}">Trạng thái</span>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
		</div>
	</div>

	<!-- Bootstrap JS -->
	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>